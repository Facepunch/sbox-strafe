
@inherits NavigatorPanel

<root style="flex-direction:column;">
    <panel class="navbar">
        <panel class="container grow">
            <navlink href="/">Home</navlink>
            <navlink href="/maps">Maps</navlink>
            <navlink href="/info">Info</navlink>
            <navlink href="/styles">Styles</navlink>
            <navlink href="/strafedb">StrafeDB</navlink>
			<div class="grow"></div>
			<button @onclick=@Close text="Close" />
        </panel>
    </panel>
    <panel class="content" @ref="NavigatorCanvas"></panel>
</root>

@code {
	protected override void OnAfterTreeRender(bool firstTime)
	{
		base.OnAfterTreeRender(firstTime);

		if(firstTime)
		{
			Navigate("/");
		}
	}

	[Event.Client.BuildInput]
	public void OnBuildInput()
	{
		if (Input.Pressed(InputButton.Score))
		{
			SetClass("open", !HasClass("open"));
		}

		if(Input.Released(InputButton.Score) && !Mouse.Visible)
		{
			RemoveClass("open");
		}

		if (!HasClass("open"))
		{
			RemoveClass("cursor");
		}
		else
		{
			if (Input.Down(InputButton.PrimaryAttack) || Input.Down(InputButton.SecondaryAttack))
			{
				AddClass("cursor");
			}
		}
	}

	void Close()
	{
		RemoveClass("open");
		RemoveClass("cursor");
	}

}
